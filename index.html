<!doctype html>

<html>
<head>
  <meta charset="utf-8">
  <title></title>
<link rel="stylesheet" href="style.css"></style>
</head>

<body>



<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js" charset="utf-8"></script>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script type="text/javascript">


//d3.select("body").append("p").text("New paragraph!");


var dataset = [ 5, 10, 15, 20, 25,100,35,33 ];
var h=1000
var w=1000


var enemyarray=_.range(0,20)
//var svg = d3.select("body").append("svg");

var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

var enemies=  svg.selectAll("circle")
                .data(enemyarray)
                .enter()
                .append("circle")
                .attr("class", "enemy")


  enemies.attr("cx", function() {
          return Math.floor(Math.random()*1000)
        })
        .attr("cy", function() {
          return Math.floor(Math.random()*1000)
        })
       .attr("r", function(d) {
            return d;
       });



circle=svg.append('circle')
    .attr('r',20)
    .attr('class','player')
    .attr("cx",250)
    .attr("cy",250)
    .style("fill", "blue")
    // .call(d3.behavior.drag()
    //   .on("drag", function() { MoveObject.apply(this)}));
    circle.call(d3.behavior.drag()
     .on("drag", function(d) { MoveObject.call(this)}));


  // circle.call(d3.behavior.drag()
  //   .on("drag", function(d) { console.log(d),MoveObject.apply(this)}));

//console.log(d3.select(circle))
console.log(circle)
//console.log(circle.attr('cx'))
var MoveObject = function (x,y){
  var x=+d3.select(this).attr("cx")
  var y=+d3.select(this).attr("cy")
  x+=d3.event.dx
  y+=d3.event.dy
  // console.log(typeof(d3.select(this).attr("cx")))
  d3.select(this).attr("cx",x)
  d3.select(this).attr("cy",y)


}

var enemiesMove=function(){

  console.log('j')
}


d3.select("body").transition().style("color", "red");

//enemies.transition().duration(500).attr('cx', 300).transition().duration(2000)
enemies[0][15].transition().duration(500).attr('cy', 600).transition().duration(2000)


// circleDragDrag= function (){
//   console.log('in circle drag')
// };
// svg.enter().append("circle")
//   .attr("class","svg")
//   .on("click",function(d){alert("hello")})



// var rect = svg.selectAll('rect').on('click', function() {
//   console.log('test');
// })




// .enter()
//               .append("rect")
//               .attr("x", 0)
//               .attr("y", 33)
//               .attr("width", 100)
//               .attr("height", 100)
//               .call(d3.behavior.drag()
//                   .on("drag", function(d) { console.log("d3.event.dx=" + d3.event.dx); }));


//var bunch_of_p=d3.select("body").selectAll("p")


// d3.select("body").selectAll("div")
//     .data(dataset)  // <-- The answer is here!
//     .enter()
//     .append("div")
//     .attr("class", "bar")
//     .style("height", function(d) {
//         var barHeight = d * 5;
//         return barHeight + "px";
//     });


</script>
</body>
</html>